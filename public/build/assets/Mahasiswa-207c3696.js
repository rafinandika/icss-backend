import{R as j,r as c,j as e,W as p,y as u}from"./app-b70f03e5.js";import{A as N,c as g,a as b,d as f,e as v,f as w,g as y,h as k}from"./AuthenticatedLayout-bc2dca79.js";import"./iconBase-a21c89fe.js";const M=(a=8)=>{for(var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=a,s="",i=0;i<l;i++){var o=Math.floor(Math.random()*n.length);s+=n.substring(o,o+1)}return s},m=j.createContext(),A=({mahasiswa:a})=>{const[n,l]=c.useState(null),[s,i]=c.useState({id:"",nama:""});return e.jsxs(N,{children:[e.jsxs("div",{className:"flex font-bold text-3xl gap-2 border-b p-4",children:[e.jsx(g,{size:37})," Mahasiswa"]}),e.jsx("div",{className:"flex justify-end my-3 mt-10",children:e.jsxs("button",{onClick:()=>document.getElementById("modal-add").showModal(),className:"btn btn-primary rounded-xl text-white",children:[e.jsx(b,{size:20})," Mahasiswa"]})}),e.jsxs(m.Provider,{value:{mahasiswa:a,edit:n,setEdit:l,del:s,setDel:i},children:[e.jsx(E,{}),e.jsx(S,{}),e.jsx(_,{})]}),e.jsx(C,{})]})},E=()=>{const{mahasiswa:a,setEdit:n,setDel:l}=j.useContext(m);return e.jsxs("div",{className:"card bg-base-100 text-center shadow-xl",children:[e.jsx("div",{className:"bg-gray-700 text-center text-white rounded-t-lg p-2",children:"Daftar Mahasiswa"}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{children:e.jsx("input",{type:"checkbox",className:"checkbox"})})}),e.jsx("th",{children:"Mahasiwa"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:a.data.map((s,i)=>e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{children:e.jsx("input",{type:"checkbox",className:"checkbox"})})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle h-12 w-12",children:e.jsx("img",{src:`/storage/${s.foto}`,alt:"Avatar BML"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:s.name}),e.jsx("div",{className:"text-sm opacity-50",children:s.username})]})]})}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.email_verified_at===null?"Belum diverifikasi":s.aktif?"Aktif":"Tidak aktif"}),e.jsxs("th",{className:"text-center",children:[e.jsx("button",{onClick:()=>{n(s),document.getElementById("modal-edit").showModal()},className:"btn btn-ghost btn-xs",children:e.jsx(f,{color:"blue",size:17})}),e.jsx("button",{onClick:()=>{l({id:s.id,nama:s.name}),document.getElementById("modal-delete").showModal()},className:"btn btn-ghost btn-xs",children:e.jsx(v,{color:"red",size:17})})]})]},i))})]})})})]})},C=()=>{const[a,n]=c.useState(!0),{data:l,setData:s,post:i,processing:o,errors:t,reset:x}=p({name:"",username:"",email:"",password:"",is_dosen:0,is_admin:0,aktif:0}),h=()=>{const d=M(8);s("password",d)},r=d=>{d.preventDefault(),i(route("mahasiswa.store"),{onSuccess:()=>{x("password","name","email","is_dosen","is_admin","aktif"),document.getElementById("modal-add").close(),u.reload()}})};return e.jsx("dialog",{id:"modal-add",className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsxs("h3",{className:"font-bold text-lg flex flex-row items-center gap-3 modal-title",children:[e.jsx(b,{})," Tambah Mahasiswa"]}),e.jsxs("form",{onSubmit:r,children:[e.jsxs("label",{className:"form-control w-full mt-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nama"})}),e.jsx("input",{type:"text",value:l.name,onChange:d=>s("name",d.target.value),placeholder:"Nama mahasiswa",className:"input input-bordered w-full"}),e.jsx("div",{className:"label",children:e.jsx("span",{className:`label-text-alt text-red-500 ${t.name?"visible":"hidden"}`,children:"Nama mahasiswa tidak boleh kosong"})})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Email"})}),e.jsx("input",{type:"text",value:l.email,onChange:d=>s("email",d.target.value),placeholder:"Email mahasiswa",className:"input input-bordered w-full"}),e.jsx("div",{className:"label",children:e.jsx("span",{className:`label-text-alt text-red-500 ${t.email?"visible":"hidden"}`,children:t.email})})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Username"})}),e.jsx("input",{type:"text",value:l.username,onChange:d=>s("username",d.target.value),placeholder:"Gunakan NPM",className:"input input-bordered w-full"}),e.jsx("div",{className:"label",children:e.jsx("span",{className:`label-text-alt text-red-500 ${t.username?"visible":"hidden"}`,children:t.username})})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Password"})}),e.jsxs("label",{className:"input input-bordered flex items-center gap-2",children:[e.jsx("input",{type:a?"password":"text",className:"grow border-none focus:ring-0 rounded-lg",value:l.password,onChange:d=>s("password",d.target.value),placeholder:"Password"}),e.jsx("button",{type:"button",onClick:()=>n(!a),children:a?e.jsx(w,{}):e.jsx(y,{})}),e.jsx("button",{type:"button",onClick:h,children:e.jsx(k,{})})]}),e.jsx("div",{className:"label",children:e.jsx("span",{className:`label-text-alt text-red-500 ${t.password?"visible":"hidden"}`,children:t.password})})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-primary mt-5 px-5",type:"submit",children:"Simpan"})})]})]})})},S=()=>{const{edit:a,setEdit:n}=c.useContext(m),{data:l,setData:s,put:i,processing:o,errors:t,reset:x}=p({id:"",name:"",username:"",email:"",is_dosen:0,is_admin:0,aktif:0});c.useEffect(()=>{a!==null&&s({id:a.id,name:a.name,username:a.username,email:a.email,is_dosen:a.is_dosen,is_admin:a.is_admin,aktif:a.aktif})},[a]);const h=r=>{r.preventDefault(),i(route("mahasiswa.update"),{onSuccess:()=>{n(null),x("password","name","email","is_dosen","is_admin","aktif"),document.getElementById("modal-edit").close(),u.reload()}})};return e.jsx("dialog",{id:"modal-edit",className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsxs("h3",{className:"font-bold text-lg flex flex-row items-center gap-3 modal-title",children:[e.jsx(b,{})," Edit Mahasiswa"]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("label",{className:"form-control w-full mt-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nama"})}),e.jsx("input",{type:"text",value:l.name,onChange:r=>s("name",r.target.value),placeholder:"Nama mahasiswa",className:"input input-bordered w-full"}),e.jsx("div",{className:"label",children:e.jsx("span",{className:`label-text-alt text-red-500 ${t.name?"visible":"hidden"}`,children:"Nama mahasiswa tidak boleh kosong"})})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Email"})}),e.jsx("input",{type:"text",value:l.email,onChange:r=>s("email",r.target.value),placeholder:"Email mahasiswa",className:"input input-bordered w-full"}),e.jsx("div",{className:"label",children:e.jsx("span",{className:`label-text-alt text-red-500 ${t.email?"visible":"hidden"}`,children:t.email})})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Username"})}),e.jsx("input",{type:"text",value:l.username,onChange:r=>s("username",r.target.value),placeholder:"Gunakan NPM",className:"input input-bordered w-full"}),e.jsx("div",{className:"label",children:e.jsx("span",{className:`label-text-alt text-red-500 ${t.username?"visible":"hidden"}`,children:t.username})})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-primary mt-5 px-5",type:"submit",children:"Simpan"})})]})]})})},_=()=>{const{del:a,setDel:n}=c.useContext(m);return e.jsx("dialog",{id:"modal-delete",className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsxs("div",{className:"text-center mt-10",children:[e.jsxs("p",{className:"text-center",children:["Apakah anda yakin ingin menghapus data ",a.nama,"?"]}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{className:"btn btn-error rounded-full mt-5 px-5",onClick:()=>document.getElementById("modal-delete").close(),children:"Batal"}),e.jsx("button",{className:"btn btn-md rounded-full mt-5 px-5 ms-4",onClick:()=>{u.delete(route("mahasiswa.destroy",a.id),{onSuccess:()=>{n({id:"",nama:""}),document.getElementById("modal-delete").close()}})},children:"Hapus"})]})]})]})})};export{A as default};
