import{R as D,r,j as e,W as M,y as b}from"./app-19db3920.js";import{A as I,i as S,j as h,k as B,l as R,m as z,n as F,c as P,d as L}from"./AuthenticatedLayout-44a7a093.js";import{G as U,B as w}from"./react-toastify.esm-8233ab47.js";import{f as $}from"./usability-5cc6591f.js";function V(t){return U({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"},child:[]}]})(t)}const g=D.createContext(),K=({materi:t})=>{const[d,a]=r.useState("grid"),[o,s]=r.useState(null),[c,n]=r.useState(null);return e.jsxs(I,{children:[e.jsxs("div",{className:"flex font-bold text-3xl justify-between gap-2 border-b p-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx(S,{size:37})," Intergrated Circuit Sport Sience"]}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("div",{}),e.jsx("div",{children:e.jsxs("button",{className:"btn btn-info text-white px-5",onClick:()=>document.getElementById("modal-add").showModal(),children:[e.jsx(h,{})," Unggah"]})})]})]}),e.jsxs(g.Provider,{value:{materi:t,view:d,setView:a,del:o,setDelete:s,edit:c,setEdit:n},children:[e.jsx(H,{}),e.jsx(O,{}),e.jsx(A,{}),e.jsx(G,{})]})]})},H=()=>{const{view:t,materi:d,setDelete:a,setEdit:o}=r.useContext(g);return e.jsx("div",{className:"card bg-white shadow-xl h-full mt-5",children:e.jsx("div",{className:"card-body h-svh",children:e.jsxs("div",{className:"grid grid-rows-1 gap-5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:`btn ${t==="grid"?"text-white btn-neutral":"text-gray-500"} btn-sm`,children:e.jsx(B,{size:20})}),e.jsx("button",{className:"btn text-gray-500 btn-sm",children:e.jsx(R,{size:20})})]})]}),e.jsx("div",{className:"w-full grid grid-cols-2 gap-4 border-t",children:d.data.length>0?d.data.map((s,c)=>e.jsxs("div",{className:"flex flex-row bg-slate-200 p-4 mt-5 rounded-2xl shadow items-center",children:[e.jsx("img",{src:"/images/file/"+s.type+".png",alt:"Icon materi",className:"h-10 w-10"}),e.jsxs("div",{className:"ms-4",children:[e.jsx("h1",{className:"text-lg font-extrabold",children:s.judul}),e.jsx("p",{className:"text-sm",children:$(s.updated_at)})]}),e.jsxs("div",{className:"dropdown dropdown-bottom ms-auto",children:[e.jsx("div",{tabIndex:0,role:"button",className:"btn btn-ghost",children:e.jsx(V,{})}),e.jsxs("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:[e.jsx("li",{className:"border-b",children:e.jsxs("a",{children:[e.jsx(z,{})," Lihat Circuit"]})}),e.jsx("li",{className:"border-b",children:e.jsxs("a",{href:`/storage/${s.file}`,download:s.judul,children:[e.jsx(F,{})," Unduh Circuit"]})}),e.jsx("li",{className:"border-b",children:e.jsxs("button",{onClick:()=>{o(s),document.getElementById("modal-edit").showModal()},children:[e.jsx(P,{})," Edit Circuit"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>{a(s),document.getElementById("modal-delete").showModal()},children:[e.jsx(L,{}),"Hapus"]})})]})]})]},c)):e.jsx("div",{className:"mt-5 text-center col-span-2",children:"Tidak ada data"})})]})})})},A=()=>{const{data:t,setData:d,post:a,reset:o}=M({judul:"",deskripsi:"",file:"",type:"",video:null}),[s,c]=r.useState({}),[n,m]=r.useState(""),p=r.useRef(null),f=()=>{p.current.click()},j=l=>{const x=l.target.files[0],k=x.name.split(".").pop().toLowerCase(),i=/(\.pdf|\.docx|\.doc|\.ppt|\.pptx)$/i;let u=!0;x.size/1024/1024>25?(c({...s,file:"*Ukuran file tidak boleh lebih dari 25 MB"}),u=!1):i.exec(x.name)||(c({...s,file:"*Hanya mendukung file dengan ekstensi .pdf | .docx | .doc | .ppt | .pptx"}),u=!1),u&&(d({...t,type:{pdf:"pdf",docx:"docx",doc:"docx",ppt:"pptx",pptx:"pptx"}[k],file:x}),m(x.name))},N=()=>{let l={};return t.judul===""&&(l.judul="*Mohon masukkan judul materi"),t.deskripsi===""&&(l.deskripsi="*Mohon masukkan deskripsi materi"),t.file===""&&(l.file="*Mohon pilih file materi"),c(l),Object.keys(l).length<1},v=l=>{if(l.preventDefault(),!N()){w.warning("Periksa kesalahan pada formulir");return}a(route("materi.store"),{forceFormData:!0,onSuccess:()=>{o(),c({}),document.getElementById("modal-add").close(),b.reload()},onError:x=>{c(x.error)}})};return e.jsxs("dialog",{id:"modal-add",className:"modal",children:[e.jsxs("div",{className:"modal-box",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center",children:[e.jsx(h,{})," Unggah Integrated Circuit"]}),e.jsx("form",{onSubmit:v,children:e.jsxs("div",{className:"flex flex-col gap-5 w-full mt-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"text",value:t.judul,onChange:l=>d("judul",l.target.value),placeholder:"Judul materi",className:"input input-bordered w-full"}),e.jsx("span",{className:s.judul?"text-red-500 text-sm":"hidden",children:s.judul})]}),e.jsx("input",{type:"file",className:"hidden",ref:p,onChange:j}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-info text-white",onClick:f,children:"Pilih File"}),e.jsx("p",{children:n===""?"Belum ada file!":n})]}),e.jsx("span",{className:s.file?"text-red-500 text-sm":"hidden",children:s.file}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"text",value:t.video,onChange:l=>d("video",l.target.value),placeholder:"Tambahkan video (opsional)",className:"input input-bordered w-full"}),e.jsx("span",{className:"text-red-500 text-sm",children:"*Pastikan url video valid, dengan format https://"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"text",value:t.deskripsi,onChange:l=>d("deskripsi",l.target.value),placeholder:"Deskripsi singkat",className:"input input-bordered w-full"}),e.jsx("span",{className:s.deskripsi?"text-red-500 text-sm":"hidden",children:s.deskripsi})]}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(h,{})," Unggah"]})]})})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{children:"close"})})]})},G=()=>{const{edit:t,setEdit:d}=r.useContext(g),{data:a,setData:o,put:s,reset:c}=M({judul:"",deskripsi:"",file:null,video:null,type:""});r.useEffect(()=>{t&&o({...a,judul:t.judul,deskripsi:t.deskripsi,type:t.type,video:t.video})},[t]);const[n,m]=r.useState({}),[p,f]=r.useState(""),j=r.useRef(null),N=()=>{j.current.click()},v=i=>{const u=i.target.files[0],C=u.name.split(".").pop().toLowerCase(),E=/(\.pdf|\.docx|\.doc|\.ppt|\.pptx)$/i;let y=!0;u.size/1024/1024>25?(m({...n,file:"*Ukuran file tidak boleh lebih dari 25 MB"}),y=!1):E.exec(u.name)||(m({...n,file:"*Hanya mendukung file dengan ekstensi .pdf | .docx | .doc | .ppt | .pptx"}),y=!1),y&&(o({...a,type:{pdf:"pdf",docx:"docx",doc:"docx",ppt:"pptx",pptx:"pptx"}[C],file:u}),f(u.name))},l=()=>{let i={};return a.judul===""&&(i.judul="*Mohon masukkan judul materi"),a.deskripsi===""&&(i.deskripsi="*Mohon masukkan deskripsi materi"),m(i),Object.keys(i).length<1},x=()=>{d(null),c(),m({}),f(""),document.getElementById("modal-edit").close()},k=i=>{if(i.preventDefault(),!l()){w.warning("Periksa kesalahan pada formulir");return}b.post(`/materi/${t.id}`,{_method:"put",...a},{onSuccess:()=>{x(),b.reload()},onError:u=>{m(u.error)}})};return e.jsx("dialog",{id:"modal-edit",className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center",children:[e.jsx(h,{})," Edit Integrated Circuit"]}),e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:"flex flex-col gap-5 w-full mt-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"text",value:a.judul,onChange:i=>o("judul",i.target.value),placeholder:"Judul materi",className:"input input-bordered w-full"}),e.jsx("span",{className:n.judul?"text-red-500 text-sm":"hidden",children:n.judul})]}),e.jsx("input",{type:"file",className:"hidden",ref:j,onChange:v}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-info text-white",onClick:N,children:"Pilih File"}),e.jsx("p",{children:p===""?`${a.judul}.${a.type}`:p})]}),e.jsx("span",{className:n.file?"text-red-500 text-sm":"hidden",children:n.file}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"text",value:a.video,onChange:i=>o("video",i.target.value),placeholder:"Tambahkan video (opsional)",className:"input input-bordered w-full"}),e.jsx("span",{className:"text-red-500 text-sm",children:"*Pastikan url video valid, dengan format https://"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"text",value:a.deskripsi,onChange:i=>o("deskripsi",i.target.value),placeholder:"Deskripsi singkat",className:"input input-bordered w-full"}),e.jsx("span",{className:n.deskripsi?"text-red-500 text-sm":"hidden",children:n.deskripsi})]}),e.jsxs("div",{className:"flex justify-center gap-5",children:[e.jsx("button",{type:"button",onClick:x,className:"btn btn-error text-white px-10",children:" Batal"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(h,{})," Perbarui Materi"]})]})]})})]})})},O=()=>{const{del:t,setDelete:d}=r.useContext(g);return e.jsx("dialog",{id:"modal-delete",className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"âœ•"})}),e.jsxs("div",{className:"text-center mt-10",children:[e.jsx("p",{className:"text-center",children:"Apakah anda yakin ingin menghapus data materi?"}),e.jsxs("p",{className:"text-center font-bold",children:['"',t==null?void 0:t.judul,'"']}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{className:"btn btn-error rounded-full mt-5 px-5",onClick:()=>document.getElementById("modal-delete").close(),children:"Batal"}),e.jsx("button",{className:"btn btn-md rounded-full mt-5 px-5 ms-4",onClick:()=>{b.delete(route("materi.destroy",t==null?void 0:t.id),{onSuccess:()=>{d(null),w.success("Materi di hapus"),document.getElementById("modal-delete").close()}})},children:"Hapus"})]})]})]})})};export{K as default};
