import{r as p,W as w,j as e,y as N,R as C}from"./app-49b359a3.js";import{M as f,A as M,a as D,b as E,c as $,d as S}from"./AuthenticatedLayout-c685a764.js";import{B as k}from"./react-toastify.esm-95969647.js";const g=p.createContext(),A=()=>{const{data:a,setData:s,post:n,processing:d,reset:o}=w({foto:null,nama:"",nip:"",tempat_lahir:"",tanggal_lahir:"",menikah:!1,istri:"",anak:null,deskripsi:"",pendidikan:[{tahun:"",tempat:"",tingkat:"",deskripsi:""}],user:{name:"",username:"",password_confirmation:"",email:"",password:"",is_dosen:1,is_admin:0,aktif:1}}),[m,t]=p.useState({}),i=()=>{let c={};return a.nama===""&&(c.nama="*Mohon masukkan Nama"),a.nip===""&&(c.nip="*Mohon masukkan NIP"),a.tempat_lahir===""&&(c.tempat_lahir="*Mohon masukkan tempat lahir"),a.tanggal_lahir===""&&(c.tanggal_lahir="*Mohon masukkan tanggal lahir"),a.menikah&&a.istri===""&&(c.istri="*Mohon masukan nama istri"),a.foto===null&&(c.foto="*Mohon masukkan Foto"),a.pendidikan.forEach((r,h)=>{r.tingkat===""&&(c["pendidikan."+h+".tingkat"]="*Mohon masukkan tingkat pendidikan"),r.tahun===""&&(c["pendidikan."+h+".tahun"]="*Mohon masukkan tahun pendidikan"),r.tempat===""&&(c["pendidikan."+h+".tempat"]="*Mohon masukkan tempat pendidikan")}),a.user.name===""&&(c["user.name"]="*Mohon masukkan Nama"),a.user.username===""&&(c["user.username"]="*Mohon masukkan Username"),a.user.email===""&&(c["user.email"]="*Mohon masukkan Email"),a.user.password===""&&(c["user.password"]="*Mohon masukkan Password"),a.user.password_confirmation!==a.user.password&&(c["user.password_confirmation"]="*Mohon konfirmasi Password dengan benar"),a.anak!==null&&a.anak.forEach((r,h)=>{r===""&&(c["anak."+h]="*Mohon masukkan nama anak")}),t(c),Object.keys(c).length<1},l=()=>N.visit("/dosen"),u=c=>{if(c.preventDefault(),!i()){k.warning("Periksa kesalahan pada formulir");return}n(route("dosen.store"),{forceFormData:!0,onSuccess:r=>{k.success(r.message),o(),l()},onError:r=>{console.log({error_nih:JSON.parse(r.error)}),k.error(r.message)}})};return e.jsx(g.Provider,{value:{data:a,setData:s,errors:m,setError:t},children:e.jsx("div",{className:"w-full h-svh flex flex-col justify-between",children:e.jsxs("div",{className:"card bg-base-100 w-full shadow mt-10 col-span-3",children:[e.jsx("div",{className:"flex p-2 text-lg font-bold justify-center items-center bg-black text-white rounded-t-xl",children:"Formulir Data Dosen"}),e.jsx("div",{className:"card-body flex flex-col gap-4",children:e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"border-b py-5",children:[e.jsx(I,{}),e.jsx("h2",{className:"card-title mb-5",children:"Data Diri :"}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.nama,onChange:c=>s("nama",c.target.value),className:"input input-bordered w-full",placeholder:"Nama"}),e.jsx("span",{className:m.nama?"text-red-500 text-sm":"hidden",children:m.nama})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.nip,onChange:c=>s("nip",c.target.value),className:"input input-bordered w-full",placeholder:"NIP"}),e.jsx("span",{className:m.nip?"text-red-500 text-sm":"hidden",children:m.nip})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.tempat_lahir,onChange:c=>s("tempat_lahir",c.target.value),className:"input input-bordered w-full",placeholder:"Tempat lahir"}),e.jsx("span",{className:m.tempat_lahir?"text-red-500 text-sm":"hidden",children:m.tempat_lahir})]}),e.jsxs("div",{children:[e.jsx("input",{type:"date",value:a.tanggal_lahir,onChange:c=>s("tanggal_lahir",c.target.value),className:"input input-bordered w-full",placeholder:"Tempat lahir"}),e.jsx("span",{className:m.tanggal_lahir?"text-red-500 text-sm":"hidden",children:m.tanggal_lahir})]})]}),e.jsx(P,{}),e.jsx(B,{}),e.jsx(F,{}),e.jsx("div",{className:"mb-4 grid grid-cols-1 gap-5",children:e.jsx("textarea",{onChange:c=>s("deskripsi",c.target.value),className:"textarea textarea-bordered",placeholder:"Tambahkan pengalaman atau deskripsi lainnya"})})]}),e.jsx(R,{}),e.jsxs("div",{className:"sticky bottom-0 w-full flex justify-center gap-4 mt-10 mb-3 p-2 bg-white",children:[e.jsx("button",{type:"button",className:"btn btn-error rounded-lg text-white",onClick:l,children:"Kembali"}),e.jsx("button",{className:"btn btn-primary rounded-lg text-white",type:"submit",children:"Simpan"})]})]})})]})})})},I=()=>{const{data:a,setData:s,errors:n,setError:d}=p.useContext(g),[o,m]=p.useState("/storage/foto-user/default.png"),t=p.useRef(null),i=()=>{t.current.click()},l=u=>{const c=u.target.files[0],r=/(\.jpg|\.png|\.svg)$/i;let h=!0;if(c.size/1024/1024>5?(d({...n,foto:"Ukuran file tidak boleh lebih dari 5 MB"}),h=!1):r.exec(c.name)||(d({...n,foto:"File harus berupa gambar dengan ext .jpg | .png | .svg"}),h=!1),!h){s("foto",null),m("/storage/foto-user/default.png");return}const x=new FileReader;x.readAsDataURL(c),x.onload=function(b){m(b.target.result)},d({...n,foto:""}),s("foto",c)};return e.jsxs("div",{className:"mb-8 w-full flex flex-col justify-center gap-5",children:[e.jsx("input",{type:"file",ref:t,style:{display:"none"},onChange:l}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:o,alt:"Foto Dosen",className:"h-40 w-auto"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:i,type:"button",className:"btn btn-info btn-sm text-white",children:a.foto===null?"Unggah Foto":"Ganti Foto"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:n.foto?"text-red-500 text-sm":"hidden",children:n.foto})})]})},P=()=>{const{data:a,setData:s,errors:n}=p.useContext(g);return e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-10",children:[e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"radio",name:"menikah",className:"radio checked:bg-red-500 me-3",onChange:d=>s("menikah",!a.menikah),checked:!a.menikah}),e.jsx("span",{className:"label-text",children:"Belum Menikah"})]}),e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"radio",name:"menikah",className:"radio checked:bg-blue-500 me-3",value:!0,onChange:d=>s("menikah",!a.menikah),checked:a.menikah}),e.jsx("span",{className:"label-text",children:"Menikah"})]})]}),a.menikah&&e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.istri,onChange:d=>s("istri",d.target.value),className:"input input-bordered w-full",placeholder:"Nama istri"}),e.jsx("span",{className:n.istri?"text-red-500 text-sm":"hidden",children:"*Nama istri tidak boleh kosong "})]})]})},F=()=>{const{data:a,setData:s,errors:n}=p.useContext(g),d=()=>{s("pendidikan",[...a.pendidikan,{tahun:"",tempat:"",tingkat:"",deskripsi:""}])},o=m=>{s("pendidikan",a.pendidikan.filter((t,i)=>i!==m))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-5",children:a.pendidikan.map((m,t)=>e.jsxs("div",{className:"mb-4 grid grid-cols-12 gap-5 items-center border-b pb-5",children:[e.jsx("input",{type:"text",value:m.tingkat,onChange:i=>s("pendidikan",a.pendidikan.map((l,u)=>u===t?{...l,tingkat:i.target.value}:l)),className:`input input-bordered w-full col-span-2 ${n[`pendidikan.${t}.tingkat`]?"input-error":""}`,placeholder:"contoh: S1"}),e.jsx("input",{type:"text",value:m.tempat,onChange:i=>s("pendidikan",a.pendidikan.map((l,u)=>u===t?{...l,tempat:i.target.value}:l)),className:`input input-bordered w-full col-span-8 ${n[`pendidikan.${t}.tempat`]?"input-error":""}`,placeholder:"Tempat pendidikan"}),e.jsx("input",{type:"text",value:m.tahun,onChange:i=>s("pendidikan",a.pendidikan.map((l,u)=>u===t?{...l,tahun:i.target.value}:l)),className:`input input-bordered w-full col-span-2 ${n[`pendidikan.${t}.tahun`]?"input-error":""}`,placeholder:"Tahun"}),e.jsx("input",{type:"text",value:m.deskripsi,onChange:i=>s("pendidikan",a.pendidikan.map((l,u)=>u===t?{...l,deskripsi:i.target.value}:l)),className:`input input-bordered w-full ${a.pendidikan.length===1?"col-span-12":"col-span-11"}`,placeholder:"Deskripsi"}),a.pendidikan.length!==1&&e.jsx("button",{onClick:()=>o(t),className:"btn btn-error text-white btn-sm col-span-1",children:"X"})]},t))}),e.jsxs("button",{type:"button",onClick:d,className:"btn btn-info text-white btn-sm mb-4 px-5",children:["Pendidikan",e.jsx(f,{})]})]})},B=()=>{const{data:a,setData:s,errors:n}=p.useContext(g),d=()=>{a.anak===null?s("anak",[""]):s("anak",[...a.anak,""])},o=t=>{a.anak.length===1?s("anak",null):s("anak",a.anak.filter((i,l)=>l!==t))},m=(t,i)=>{s("anak",a.anak.map((l,u)=>u===t?i:l))};return e.jsxs("div",{className:"border-b mb-5",children:[e.jsx("div",{className:"mb-4 grid grid-cols-1 gap-5",children:a.anak!==null&&a.anak.map((t,i)=>e.jsxs("div",{className:"grid grid-cols-12 justify-center items-center gap-4",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("input",{type:"text",value:a.anak[i],onChange:l=>m(i,l.target.value),className:"input input-bordered w-full",placeholder:"Nama anak"}),e.jsx("span",{className:n[`anak.${i}`]?"text-red-500 text-sm":"hidden",children:n[`anak.${i}`]})]}),e.jsx("button",{type:"button",className:"btn text-red-500 btn-sm col-span-1",onClick:()=>o(i),children:"X"})]},i))}),e.jsxs("button",{type:"button",className:"btn btn-info text-white btn-sm mb-4 px-5",onClick:d,children:["Data Anak ",e.jsx(f,{})]})]})},R=()=>{const{data:a,setData:s,errors:n}=p.useContext(g),d=()=>{s("user",{...a.user,name:a.nama,username:a.nip})};return e.jsxs("div",{className:"mt-5",children:[e.jsxs("h2",{className:"card-title mb-5",children:["Data User :",e.jsx("button",{type:"button",className:"btn btn-info text-white btn-sm",onClick:()=>d(),children:"Sinkron data diri"})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.user.name,onChange:o=>s("user",{...a.user,name:o.target.value}),className:"input input-bordered w-full",placeholder:"Nama user"}),e.jsx("span",{className:n["user.name"]?"text-red-500 text-sm":"hidden",children:n["user.name"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.user.username,onChange:o=>s("user",{...a.user,username:o.target.value}),className:"input input-bordered w-full",placeholder:"Username"}),e.jsx("span",{className:n["user.username"]?"text-red-500 text-sm":"hidden",children:n["user.username"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.user.email,onChange:o=>s("user",{...a.user,email:o.target.value}),className:"input input-bordered w-full",placeholder:"Email"}),e.jsx("span",{className:n["user.email"]?"text-red-500 text-sm":"hidden",children:n["user.email"]})]}),e.jsxs("div",{className:"flex flex-row gap-10",children:[e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"radio",name:"admin",className:"radio checked:bg-red-500 me-3",onChange:o=>s("user",{...a.user,admin:!a.user.admin}),checked:!a.user.admin}),e.jsx("span",{className:"label-text",children:"Bukan Admin"})]}),e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"radio",name:"admin",className:"radio checked:bg-blue-500 me-3",value:!0,onChange:o=>s("user",{...a.user,admin:!a.user.admin}),checked:a.user.admin}),e.jsx("span",{className:"label-text",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.user.password,onChange:o=>s("user",{...a.user,password:o.target.value}),className:"input input-bordered w-full",placeholder:"Password"}),e.jsx("span",{className:n["user.password"]?"text-red-500 text-sm":"hidden",children:n["user.password"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.user.password_confirmation,onChange:o=>s("user",{...a.user,password_confirmation:o.target.value}),className:"input input-bordered w-full",placeholder:"Konfirmasi Password"}),e.jsx("span",{className:n["user.password_confirmation"]?"text-red-500 text-sm":"hidden",children:n["user.password_confirmation"]})]})]})]})},j=p.createContext(),U=({editData:a})=>{const{data:s,setData:n,put:d,processing:o,reset:m}=w({id:a.id,foto:null,nama:"",nip:"",tempat_lahir:"",tanggal_lahir:"",menikah:!1,istri:"",anak:null,deskripsi:"",pendidikan:[{tahun:"",tempat:"",tingkat:"",deskripsi:""}],user:{id:"",name:"",username:"",password_confirmation:"",email:"",password:"",is_dosen:1,admin:0,aktif:1}});p.useEffect(()=>{n({...s,nip:a.nip,nama:a.nama,tempat_lahir:a.tempat_lahir,tanggal_lahir:a.tanggal_lahir,menikah:a.menikah,istri:a.istri,deskripsi:a.deskripsi,anak:JSON.parse(a.anak),pendidikan:JSON.parse(a.pendidikan),user:{id:a.user.id,name:a.user.name,username:a.user.username,password_confirmation:a.user.password_confirmation,email:a.user.email,is_dosen:1,admin:a.user.is_admin,aktif:a.user.aktif}})},[a]);const[t,i]=p.useState({}),l=()=>{let r={};return s.nama===""&&(r.nama="*Mohon masukkan Nama"),s.nip===""&&(r.nip="*Mohon masukkan NIP"),s.tempat_lahir===""&&(r.tempat_lahir="*Mohon masukkan tempat lahir"),s.tanggal_lahir===""&&(r.tanggal_lahir="*Mohon masukkan tanggal lahir"),s.menikah&&s.istri===""&&(r.istri="*Mohon masukan nama istri"),s.pendidikan.forEach((h,x)=>{h.tingkat===""&&(r["pendidikan."+x+".tingkat"]="*Mohon masukkan tingkat pendidikan"),h.tahun===""&&(r["pendidikan."+x+".tahun"]="*Mohon masukkan tahun pendidikan"),h.tempat===""&&(r["pendidikan."+x+".tempat"]="*Mohon masukkan tempat pendidikan")}),s.user.name===""&&(r["user.name"]="*Mohon masukkan Nama"),s.user.username===""&&(r["user.username"]="*Mohon masukkan Username"),s.user.email===""&&(r["user.email"]="*Mohon masukkan Email"),s.anak!==null&&s.anak.forEach((h,x)=>{h===""&&(r["anak."+x]="*Mohon masukkan nama anak")}),i(r),Object.keys(r).length<1},u=()=>N.visit("/dosen"),c=r=>{if(r.preventDefault(),!l()){k.warning("Periksa kesalahan pada formulir");return}d(`/dosen/${s.id}`,{forceFormData:s.foto!==null,onSuccess:h=>{k.success(h.message),m(),u()},onError:h=>{k.error(h.message)}})};return e.jsxs(j.Provider,{value:{data:s,setData:n,errors:t,setError:i,editData:a},children:[e.jsx("button",{type:"button",onClick:c,children:"Simpan"}),e.jsx("div",{className:"w-full h-svh flex flex-col justify-between",children:e.jsxs("div",{className:"card bg-base-100 w-full shadow mt-10 col-span-3",children:[e.jsx("div",{className:"flex p-2 text-lg font-bold justify-center items-center bg-black text-white rounded-t-xl",children:"Formulir Edit Data Dosen"}),e.jsx("div",{className:"card-body flex flex-col gap-4",children:e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"border-b py-5",children:[e.jsx(T,{}),e.jsx("h2",{className:"card-title mb-5",children:"Data Diri :"}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:s.nama,onChange:r=>n("nama",r.target.value),className:"input input-bordered w-full",placeholder:"Nama"}),e.jsx("span",{className:t.nama?"text-red-500 text-sm":"hidden",children:t.nama})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:s.nip,onChange:r=>n("nip",r.target.value),className:"input input-bordered w-full",placeholder:"NIP"}),e.jsx("span",{className:t.nip?"text-red-500 text-sm":"hidden",children:t.nip})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:s.tempat_lahir,onChange:r=>n("tempat_lahir",r.target.value),className:"input input-bordered w-full",placeholder:"Tempat lahir"}),e.jsx("span",{className:t.tempat_lahir?"text-red-500 text-sm":"hidden",children:t.tempat_lahir})]}),e.jsxs("div",{children:[e.jsx("input",{type:"date",value:s.tanggal_lahir,onChange:r=>n("tanggal_lahir",r.target.value),className:"input input-bordered w-full",placeholder:"Tempat lahir"}),e.jsx("span",{className:t.tanggal_lahir?"text-red-500 text-sm":"hidden",children:t.tanggal_lahir})]})]}),e.jsx(L,{}),e.jsx(z,{}),e.jsx(O,{}),e.jsx("div",{className:"mb-4 grid grid-cols-1 gap-5",children:e.jsx("textarea",{value:s.deskripsi,onChange:r=>n("deskripsi",r.target.value),className:"textarea textarea-bordered",placeholder:"Tambahkan pengalaman atau deskripsi lainnya"})})]}),e.jsx(V,{}),e.jsxs("div",{className:"sticky bottom-0 w-full flex justify-center gap-4 mt-10 mb-3 p-2 bg-white",children:[e.jsx("button",{type:"button",className:"btn btn-error rounded-lg text-white",onClick:u,children:"Kembali"}),e.jsx("button",{className:"btn btn-primary rounded-lg text-white",type:"submit",children:"Simpan"})]})]})})]})})]})},T=()=>{const{data:a,setData:s,errors:n,setError:d,editData:o}=p.useContext(j),[m,t]=p.useState("/storage/foto-user/default.png"),i=p.useRef(null),l=()=>{i.current.click()},u=c=>{const r=c.target.files[0],h=/(\.jpg|\.png|\.svg)$/i;let x=!0;if(r.size/1024/1024>5?(d({...n,foto:"Ukuran file tidak boleh lebih dari 5 MB"}),x=!1):h.exec(r.name)||(d({...n,foto:"File harus berupa gambar dengan ext .jpg | .png | .svg"}),x=!1),!x){s("foto",null),t(`/storage/${o.foto}`);return}const b=new FileReader;b.readAsDataURL(r),b.onload=function(_){t(_.target.result)},d({...n,foto:""}),s("foto",r)};return p.useEffect(()=>{t(`/storage/${o.foto}`)},[o.foto]),e.jsxs("div",{className:"mb-8 w-full flex flex-col justify-center gap-5",children:[e.jsx("input",{type:"file",ref:i,style:{display:"none"},onChange:u}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:m,alt:"Foto Dosen",className:"h-40 w-auto"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:l,type:"button",className:"btn btn-info btn-sm text-white",children:"Ganti Foto"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:n.foto?"text-red-500 text-sm":"hidden",children:n.foto})})]})},L=()=>{const{data:a,setData:s,errors:n}=p.useContext(j);return e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-10",children:[e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"radio",name:"menikah",className:"radio checked:bg-red-500 me-3",onChange:d=>s("menikah",!a.menikah),checked:!a.menikah}),e.jsx("span",{className:"label-text",children:"Belum Menikah"})]}),e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"radio",name:"menikah",className:"radio checked:bg-blue-500 me-3",value:!0,onChange:d=>s("menikah",!a.menikah),checked:a.menikah}),e.jsx("span",{className:"label-text",children:"Menikah"})]})]}),a.menikah&&e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.istri,onChange:d=>s("istri",d.target.value),className:"input input-bordered w-full",placeholder:"Nama istri"}),e.jsx("span",{className:n.istri?"text-red-500 text-sm":"hidden",children:"*Nama istri tidak boleh kosong "})]})]})},O=()=>{const{data:a,setData:s,errors:n}=p.useContext(j),d=()=>{s("pendidikan",[...a.pendidikan,{tahun:"",tempat:"",tingkat:"",deskripsi:""}])},o=m=>{s("pendidikan",a.pendidikan.filter((t,i)=>i!==m))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-5",children:a.pendidikan.map((m,t)=>e.jsxs("div",{className:"mb-4 grid grid-cols-12 gap-5 items-center border-b pb-5",children:[e.jsx("input",{type:"text",value:m.tingkat,onChange:i=>s("pendidikan",a.pendidikan.map((l,u)=>u===t?{...l,tingkat:i.target.value}:l)),className:`input input-bordered w-full col-span-2 ${n[`pendidikan.${t}.tingkat`]?"input-error":""}`,placeholder:"contoh: S1"}),e.jsx("input",{type:"text",value:m.tempat,onChange:i=>s("pendidikan",a.pendidikan.map((l,u)=>u===t?{...l,tempat:i.target.value}:l)),className:`input input-bordered w-full col-span-8 ${n[`pendidikan.${t}.tempat`]?"input-error":""}`,placeholder:"Tempat pendidikan"}),e.jsx("input",{type:"text",value:m.tahun,onChange:i=>s("pendidikan",a.pendidikan.map((l,u)=>u===t?{...l,tahun:i.target.value}:l)),className:`input input-bordered w-full col-span-2 ${n[`pendidikan.${t}.tahun`]?"input-error":""}`,placeholder:"Tahun"}),e.jsx("input",{type:"text",value:m.deskripsi,onChange:i=>s("pendidikan",a.pendidikan.map((l,u)=>u===t?{...l,deskripsi:i.target.value}:l)),className:`input input-bordered w-full ${a.pendidikan.length===1?"col-span-12":"col-span-11"}`,placeholder:"Deskripsi"}),a.pendidikan.length!==1&&e.jsx("button",{onClick:()=>o(t),className:"btn btn-error text-white btn-sm col-span-1",children:"X"})]},t))}),e.jsxs("button",{type:"button",onClick:d,className:"btn btn-info text-white btn-sm mb-4 px-5",children:["Pendidikan",e.jsx(f,{})]})]})},z=()=>{const{data:a,setData:s,errors:n}=p.useContext(j),d=()=>{a.anak===null?s("anak",[""]):s("anak",[...a.anak,""])},o=t=>{a.anak.length===1?s("anak",null):s("anak",a.anak.filter((i,l)=>l!==t))},m=(t,i)=>{s("anak",a.anak.map((l,u)=>u===t?i:l))};return e.jsxs("div",{className:"border-b mb-5",children:[e.jsx("div",{className:"mb-4 grid grid-cols-1 gap-5",children:a.anak!==null&&a.anak.map((t,i)=>e.jsxs("div",{className:"grid grid-cols-12 justify-center items-center gap-4",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("input",{type:"text",value:a.anak[i],onChange:l=>m(i,l.target.value),className:"input input-bordered w-full",placeholder:"Nama anak"}),e.jsx("span",{className:n[`anak.${i}`]?"text-red-500 text-sm":"hidden",children:n[`anak.${i}`]})]}),e.jsx("button",{type:"button",className:"btn text-red-500 btn-sm col-span-1",onClick:()=>o(i),children:"X"})]},i))}),e.jsxs("button",{type:"button",className:"btn btn-info text-white btn-sm mb-4 px-5",onClick:d,children:["Data Anak ",e.jsx(f,{})]})]})},V=()=>{const{data:a,setData:s,errors:n}=p.useContext(j),d=()=>{s("user",{...a.user,name:a.nama,username:a.nip})};return e.jsxs("div",{className:"mt-5",children:[e.jsxs("h2",{className:"card-title mb-5",children:["Data User :",e.jsx("button",{type:"button",className:"btn btn-info text-white btn-sm",onClick:()=>d(),children:"Sinkron data diri"})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.user.name,onChange:o=>s("user",{...a.user,name:o.target.value}),className:"input input-bordered w-full",placeholder:"Nama user"}),e.jsx("span",{className:n["user.name"]?"text-red-500 text-sm":"hidden",children:n["user.name"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.user.username,onChange:o=>s("user",{...a.user,username:o.target.value}),className:"input input-bordered w-full",placeholder:"Username"}),e.jsx("span",{className:n["user.username"]?"text-red-500 text-sm":"hidden",children:n["user.username"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.user.email,onChange:o=>s("user",{...a.user,email:o.target.value}),className:"input input-bordered w-full",placeholder:"Email"}),e.jsx("span",{className:n["user.email"]?"text-red-500 text-sm":"hidden",children:n["user.email"]})]}),e.jsxs("div",{className:"flex flex-row gap-10",children:[e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"radio",name:"admin",className:"radio checked:bg-red-500 me-3",onChange:o=>s("user",{...a.user,admin:!a.user.admin}),checked:!a.user.admin}),e.jsx("span",{className:"label-text",children:"Bukan Admin"})]}),e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"radio",name:"admin",className:"radio checked:bg-blue-500 me-3",value:!0,onChange:o=>s("user",{...a.user,admin:!a.user.admin}),checked:a.user.admin}),e.jsx("span",{className:"label-text",children:"Admin"})]})]})]})]})},v=C.createContext(),H=({dosen:a})=>{const[s,n]=p.useState({type:"loading",data:null}),[d,o]=p.useState({data:null});return p.useEffect(()=>{a.data.length===0?n({type:"kosong",data:null}):n({type:"list",data:a})},[a]),e.jsxs(M,{children:[e.jsxs("div",{className:"flex font-bold text-3xl gap-2 border-b p-4",children:[e.jsx(D,{size:37})," Dosen"]}),(s.type==="list"||s.type==="kosong")&&e.jsx("div",{className:"flex justify-end my-3 mt-10",children:e.jsxs("button",{onClick:()=>n({type:"add",data:null}),className:"btn btn-primary rounded-xl text-white",children:[e.jsx(E,{size:20}),"Tambah Dosen"]})}),e.jsxs(v.Provider,{value:{view:s,setView:n,del:d,setDelete:o},children:[s.type==="loading"&&e.jsx(y,{title:"Memuat data...",spinner:!0}),s.type==="kosong"&&e.jsx(y,{title:"Data dosen masih kosong",spinner:!1}),s.type==="add"&&e.jsx(A,{}),s.type==="edit"&&e.jsx(U,{editData:s.data}),s.type==="list"&&e.jsx(X,{})]})]})},y=({title:a,spinner:s=!1})=>e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 mt-16",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 py-6 flex justify-center",children:[s&&e.jsx("span",{className:"loading loading-spinner loading-md me-2"})," ",a]})})}),X=()=>{const{view:a,setView:s,setDelete:n}=C.useContext(v);return e.jsxs("div",{className:"card bg-base-100 text-center shadow-xl",children:[e.jsx("div",{className:"bg-gray-700 text-center text-white rounded-t-lg p-2",children:"Daftar Dosen"}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{children:e.jsx("input",{type:"checkbox",className:"checkbox"})})}),e.jsx("th",{children:"Dosen"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:a.data.data.map((d,o)=>e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("label",{children:e.jsx("input",{type:"checkbox",className:"checkbox"})})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle h-12 w-12",children:e.jsx("img",{src:`/storage/${d.foto}`,alt:"Avatar BML"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:d.nama}),e.jsxs("div",{className:"text-sm opacity-50",children:["NIP ",d.nip]})]})]})}),e.jsx("td",{children:d.user.email}),e.jsx("td",{children:d.menikah?"Menikah":"Belum Menikah"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-ghost btn-sm text-yellow-500",onClick:()=>s({type:"edit",data:d}),children:e.jsx($,{})}),e.jsx("button",{className:"btn btn-ghost btn-sm text-red-500",onClick:()=>{document.getElementById("modal-delete").showModal(),n(d)},children:e.jsx(S,{})})]})]},o))})]})}),e.jsx(J,{})]})]})},J=()=>{const{del:a,setDelete:s}=p.useContext(v);return e.jsx("dialog",{id:"modal-delete",className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsxs("div",{className:"text-center mt-10",children:[e.jsx("p",{className:"text-center",children:"Apakah anda yakin ingin menghapus data dosen?"}),e.jsxs("p",{className:"text-center font-bold",children:['"',a==null?void 0:a.nama,'"']}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{className:"btn btn-error rounded-full mt-5 px-5",onClick:()=>document.getElementById("modal-delete").close(),children:"Batal"}),e.jsx("button",{className:"btn btn-md rounded-full mt-5 px-5 ms-4",onClick:()=>{N.delete(route("dosen.destroy",a==null?void 0:a.id),{onSuccess:()=>{s({data:null}),document.getElementById("modal-delete").close()}})},children:"Hapus"})]})]})]})})};export{v as DosenContext,H as default};
